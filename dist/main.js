!function(){"use strict";var e={514:function(e,t,n){e.exports=n.p+"12c0641a52ce140326c9.png"},551:function(e,t,n){e.exports=n.p+"4e8e0a1d604782a0dff8.svg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r={};!function(){n.d(r,{vi:function(){return x},Gq:function(){return w},S9:function(){return I}});function e(e){e.classList.add("popup-menu_opened"),document.addEventListener("keydown",t),e.addEventListener("click",o)}function t(e){27===e.keyCode&&i(document.querySelector(".popup-menu_opened"))}function o(e){e.target.classList.contains("popup-menu_opened")&&i(e.target)}function i(e){e.classList.remove("popup-menu_opened"),document.removeEventListener("keydown",t),e.removeEventListener("click",o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._template=document.querySelector(n).content.querySelector(".card")}var n,r;return n=t,(r=[{key:"_addEventListeners",value:function(){this._imageEraseButton(),this._cardLikeButton(),this._cardImagePopupButton()}},{key:"_imageEraseButton",value:function(){var e=this._element.querySelector(".card__erase");e.addEventListener("click",(function(){e.closest(".card").remove()}))}},{key:"_cardLikeButton",value:function(){this._element.querySelector(".card__like-button").addEventListener("click",(function(e){e.target.classList.toggle("card__like-button_active")}))}},{key:"_cardImagePopupButton",value:function(){var t=this;this._element.querySelector(".card__image").addEventListener("click",(function(){e(w),x.src=t._link,x.alt=t._name,I.textContent=t._name}))}},{key:"render",value:function(){return this._element=this._template.cloneNode(!0),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__text").textContent=this._name,this._addEventListeners(),this._element}}])&&u(n.prototype,r),t}();function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputElements=function(e){if(Array.isArray(e))return l(e)}(r=this._formElement.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_toggleSubmitBtn",value:function(){this._inputElements.some((function(e){return!e.validity.valid}))?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleSubmitBtn(),this._inputElements.forEach((function(t,n){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitBtn(t,n)}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleSubmitBtn(this._inputList,this._buttonElement),this._inputElements.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&s(t.prototype,n),e}(),p=n(514),d=n(551);document.getElementById("avatar_image").src=p,document.getElementById("logo-icon").src=d;var m=document.querySelector(".popup-menu"),_=m.querySelector(".popup-menu__edit-form"),f=m.querySelector(".popup-menu__close-button"),v=m.querySelector(".popup-menu__input_type_name"),y=m.querySelector(".popup-menu__input_type_title"),h=document.querySelector(".profile-menu__full-name"),b=document.querySelector(".profile-menu__title"),E=document.querySelector(".profile-menu__edit-button"),S=document.querySelector("#popup-menu_type_add-card"),g=S.querySelector(".popup-menu__close-button"),k=S.querySelector(".popup-menu__input_type_title"),L=S.querySelector(".popup-menu__input_type_url"),q=document.querySelector(".profile-menu__add-button"),C=document.querySelector(".cards__list"),w=document.querySelector("#popup-menu_image"),B=w.querySelector("#image_close_button"),x=w.querySelector(".popup-menu__image"),I=w.querySelector(".popup-menu__text");function j(e){var t=new a(e,V);C.prepend(t.render())}_.addEventListener("submit",(function(e){e.preventDefault(),h.textContent=v.value,b.textContent=y.value,i(m)})),f.addEventListener("click",(function(){i(m)})),g.addEventListener("click",(function(){i(S)})),S.addEventListener("submit",(function(e){e.preventDefault(),j({name:k.value,link:L.value}),i(S)}));var V="#card-template";[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg",alt:"Yosemite"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg",alt:"A Lake"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg",alt:"Mountains"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg",alt:"Vanoise"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg",alt:"The Lago"}].forEach((function(e){j(e)})),B.addEventListener("click",(function(){i(w)}));var A={formSelector:".popup-menu__submit-form",inputSelector:".popup-menu__input",submitButtonSelector:".popup-menu__save-button",inactiveButtonClass:"popup-menu__save-button_disabled",inputErrorClass:"popup-menu__input_type_error",errorClass:"popup-menu__error_visible"},O=new c(A,m),P=new c(A,S);E.addEventListener("click",(function(){v.value=h.textContent,y.value=b.textContent,O.resetValidation(),e(m)})),q.addEventListener("click",(function(){k.value="",L.value="",P.resetValidation(),e(S)})),O.enableValidation(),P.enableValidation()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEdBa0Q3QkksRUFBa0JDLGtCQUNsQnRHLEVBQVVzRixNQUdaYyxFQUFxQkcsbUJBQ3JCRixFQUFrQkUsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zY3JpcHRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc2NyaXB0cy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc2NyaXB0cy9pbml0aWFsLWNhcmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cE1lbnUpIHsgLy8gVGhpcyBvcGVucyB0aGUgcG9wdXAgbWVudXNcbiAgcG9wdXBNZW51LmNsYXNzTGlzdC5hZGQoJ3BvcHVwLW1lbnVfb3BlbmVkJyk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGVCdG4pO1xuICBwb3B1cE1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVNb3VzZUNsaWNrKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlQnRuKGV2dCkgeyAvLyBUaGlzIGhhbmRsZXMgd2hhdCBoYXBwZW5zIHVwb24gcHJlc3NpbmcgdGhlIGVzY2FwZSBrZXlcbiAgY29uc3QgZXNjS2V5Y29kZSA9IDI3O1xuICBpZiAoZXZ0LmtleUNvZGUgPT09IGVzY0tleWNvZGUpIHtcbiAgICBjbG9zZVBvcHVwKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1tZW51X29wZW5lZCcpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNb3VzZUNsaWNrKGV2dCkgeyAvLyBUaGlzIGhhbmRsZXMgd2hhdCBoYXBwZW5zIHVwb24gbW91c2UgY2xpY2ssIG91dHNpZGUgb2YgdGhlIHpvb21lZCBpbWFnZVxuICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLW1lbnVfb3BlbmVkJykpIHtcbiAgICBjbG9zZVBvcHVwKGV2dC50YXJnZXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXBNZW51KSB7IC8vIFRoaXMgb3BlbnMgdGhlIHBvcHVwIG1lbnVzXG4gIHBvcHVwTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1tZW51X29wZW5lZCcpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlQnRuKTtcbiAgcG9wdXBNZW51LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlTW91c2VDbGljayk7XG59XG5cbmV4cG9ydCB7IG9wZW5Qb3B1cCwgaGFuZGxlRXNjYXBlQnRuLCBoYW5kbGVNb3VzZUNsaWNrLCBjbG9zZVBvcHVwIH07XG4iLCJpbXBvcnQgeyBvcGVuUG9wdXAgfSBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCB7IHBvcHVwSW1hZ2VNZW51LCBwb3B1cEltYWdlLCBwb3B1cEltYWdlVGV4dCB9IGZyb20gJy4vaW5kZXguanMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCB0ZW1wbGF0ZUVsZW1lbnRTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZUVsZW1lbnRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpO1xuICB9XG4gIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbWFnZUVyYXNlQnV0dG9uKCk7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24oKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VQb3B1cEJ1dHRvbigpO1xuICB9XG5cbiAgX2ltYWdlRXJhc2VCdXR0b24oKSB7XG4gICAgY29uc3QgZXJhc2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19lcmFzZScpO1xuICAgIGVyYXNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgZXJhc2VCdXR0b24uY2xvc2VzdCgnLmNhcmQnKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9jYXJkTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKVxuICAgIH0pO1xuICB9XG5cbiAgX2NhcmRJbWFnZVBvcHVwQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBvcGVuUG9wdXAocG9wdXBJbWFnZU1lbnUpO1xuICAgICAgcG9wdXBJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgcG9wdXBJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgcG9wdXBJbWFnZVRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIH0pO1xuICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuc3JjID0gdGhpcy5fbGluaztcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RleHQnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybVNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBmb3JtU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZvcm1TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gZm9ybVNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZm9ybVNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZm9ybVNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF90b2dnbGVTdWJtaXRCdG4oKSB7XG4gICAgY29uc3QgaGFzVmFsaWRJbnB1dCA9IHRoaXMuX2lucHV0RWxlbWVudHMuc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgICBpZiAoaGFzVmFsaWRJbnB1dCkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlU3VibWl0QnRuKCk7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKCBpbnB1dEVsZW1lbnQsIGJ1dHRvbkVsZW1lbnQgKSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdG4oaW5wdXRFbGVtZW50LCBidXR0b25FbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bih0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZ0ID0+IHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gJy4vaW5pdGlhbC1jYXJkcy5qcyc7XG5pbXBvcnQgeyBvcGVuUG9wdXAsIGNsb3NlUG9wdXAgfSBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4vQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xuaW1wb3J0IGF2YXRhckltYWdlclNyYyBmcm9tICcuLi9pbWFnZXMvYXZhdGFyX2ltYWdlLnBuZyc7XG5pbXBvcnQgbG9nb1NyYyBmcm9tICcuLi9pbWFnZXMvbG9nby5zdmcnO1xuXG4vLyBsb2dvIGFuZCBhdmF0YXIgaW1hZ2VzXG5jb25zdCBhdmF0YXJJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJfaW1hZ2UnKTtcbmF2YXRhckltYWdlLnNyYyA9IGF2YXRhckltYWdlclNyYztcbmNvbnN0IGxvZ29JY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ28taWNvbicpO1xubG9nb0ljb24uc3JjID0gbG9nb1NyYztcblxuLy8gcHJvZmlsZS1uYW1lIGFuZCB0aXRsZSBlZGl0IG1lbnVcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1tZW51Jyk7XG5jb25zdCBwcm9maWxlTWVudUVkaXRGb3JtID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1tZW51X19lZGl0LWZvcm0nKTtcbmNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtbWVudV9fY2xvc2UtYnV0dG9uJyk7XG5jb25zdCBtZW51SW5wdXROYW1lID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1tZW51X19pbnB1dF90eXBlX25hbWUnKTtcbmNvbnN0IG1lbnVJbnB1dFRpdGxlID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1tZW51X19pbnB1dF90eXBlX3RpdGxlJyk7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLW1lbnVfX2Z1bGwtbmFtZScpO1xuY29uc3QgcHJvZmlsZVRpdGxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1tZW51X190aXRsZScpO1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1tZW51X19lZGl0LWJ1dHRvbicpO1xuXG4vLyBhZGQtY2FyZCBtZW51XG5jb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXAtbWVudV90eXBlX2FkZC1jYXJkJyk7XG5jb25zdCBwb3B1cEFkZENhcmRDbG9zZUJ1dHRvbiA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtbWVudV9fY2xvc2UtYnV0dG9uJyk7XG5jb25zdCBwb3B1cEFkZENhcmRUaXRsZUlucHV0ID0gcG9wdXBBZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1tZW51X19pbnB1dF90eXBlX3RpdGxlJyk7XG5jb25zdCBwb3B1cEFkZENhcmRVcmxJbnB1dCA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtbWVudV9faW5wdXRfdHlwZV91cmwnKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1tZW51X19hZGQtYnV0dG9uJyk7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpc3QnKTtcblxuLy8gaW1hZ2UgcG9wdXAgbWVudVxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwLW1lbnVfaW1hZ2UnKTtcbmNvbnN0IHBvcHVwSW1hZ2VDbG9zZUJ0biA9IHBvcHVwSW1hZ2VNZW51LnF1ZXJ5U2VsZWN0b3IoJyNpbWFnZV9jbG9zZV9idXR0b24nKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcG9wdXBJbWFnZU1lbnUucXVlcnlTZWxlY3RvcignLnBvcHVwLW1lbnVfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZVRleHQgPSBwb3B1cEltYWdlTWVudS5xdWVyeVNlbGVjdG9yKCcucG9wdXAtbWVudV9fdGV4dCcpO1xuXG5mdW5jdGlvbiBlZGl0UHJvZmlsZUNvbnRlbnQoKSB7IC8vIFN0b3JlcyBQcm9maWxlIG5hbWUgYW5kIHRpdGxlXG4gIG1lbnVJbnB1dE5hbWUudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgbWVudUlucHV0VGl0bGUudmFsdWUgPSBwcm9maWxlVGl0bGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbn1cblxucHJvZmlsZU1lbnVFZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7IC8vIEhhbmRsZXMgdGhlIGV2ZW50IHRoYXQgaGFwcGVucyB1cG9uIGNsaWNraW5nIHRoZSBzdWJtaXQgYnV0dG9uIG9mIHRoZSBwb3B1cFxuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBtZW51SW5wdXROYW1lLnZhbHVlO1xuICBwcm9maWxlVGl0bGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG1lbnVJbnB1dFRpdGxlLnZhbHVlO1xuICBjbG9zZVBvcHVwKHByb2ZpbGVQb3B1cCk7XG59KTtcblxucHJvZmlsZUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjbG9zZVBvcHVwKHByb2ZpbGVQb3B1cCk7XG59KTtcblxuLy8gYWRkIGNhcmQgbWVudVxuZnVuY3Rpb24gZWRpdEFkZENhcmRDb250ZW50KCkge1xuICBwb3B1cEFkZENhcmRUaXRsZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgcG9wdXBBZGRDYXJkVXJsSW5wdXQudmFsdWUgPSBcIlwiO1xufTtcblxucG9wdXBBZGRDYXJkQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNsb3NlUG9wdXAocG9wdXBBZGRDYXJkKTtcbn0pO1xuXG5wb3B1cEFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSB7IG5hbWU6IHBvcHVwQWRkQ2FyZFRpdGxlSW5wdXQudmFsdWUsIGxpbms6IHBvcHVwQWRkQ2FyZFVybElucHV0LnZhbHVlIH07XG4gIGNyZWF0ZUNhcmQoY2FyZEVsZW1lbnQpO1xuICBjbG9zZVBvcHVwKHBvcHVwQWRkQ2FyZCk7XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIHRlbXBsYXRlRWxlbWVudFNlbGVjdG9yKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZC5yZW5kZXIoKSk7XG59XG5cbi8vIFRlbXBsYXRlXG5jb25zdCB0ZW1wbGF0ZUVsZW1lbnRTZWxlY3RvciA9ICcjY2FyZC10ZW1wbGF0ZSc7XG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcbiAgY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG59KTtcblxucG9wdXBJbWFnZUNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjbG9zZVBvcHVwKHBvcHVwSW1hZ2VNZW51KTtcbn0pO1xuXG4vLyBWYWxpZGF0aW9uc1xuY29uc3QgZm9ybVNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwLW1lbnVfX3N1Ym1pdC1mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwLW1lbnVfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cC1tZW51X19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwLW1lbnVfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cC1tZW51X19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXAtbWVudV9fZXJyb3JfdmlzaWJsZVwiXG59O1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgcHJvZmlsZVBvcHVwKTtcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBwb3B1cEFkZENhcmQpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVDb250ZW50KCk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBvcGVuUG9wdXAocHJvZmlsZVBvcHVwKTtcbn0pO1xuXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBlZGl0QWRkQ2FyZENvbnRlbnQoKTtcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIG9wZW5Qb3B1cChwb3B1cEFkZENhcmQpO1xufSk7XG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgICBhbHQ6IFwiWW9zZW1pdGVcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgYWx0OiBcIkEgTGFrZVwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICBhbHQ6IFwiTW91bnRhaW5zXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgICBhbHQ6IFwiTGF0ZW1hclwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgICBhbHQ6IFwiVmFub2lzZVwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICAgIGFsdDogXCJUaGUgTGFnb1wiXG4gIH1cbl07XG5cbmV4cG9ydCBkZWZhdWx0IGluaXRpYWxDYXJkcztcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwib3BlblBvcHVwIiwicG9wdXBNZW51IiwiY2xhc3NMaXN0IiwiYWRkIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRXNjYXBlQnRuIiwiaGFuZGxlTW91c2VDbGljayIsImV2dCIsImtleUNvZGUiLCJjbG9zZVBvcHVwIiwicXVlcnlTZWxlY3RvciIsInRhcmdldCIsImNvbnRhaW5zIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkNhcmQiLCJjYXJkRGF0YSIsInRlbXBsYXRlRWxlbWVudFNlbGVjdG9yIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsImNvbnRlbnQiLCJfaW1hZ2VFcmFzZUJ1dHRvbiIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkSW1hZ2VQb3B1cEJ1dHRvbiIsImVyYXNlQnV0dG9uIiwiX2VsZW1lbnQiLCJjbG9zZXN0IiwidG9nZ2xlIiwicG9wdXBJbWFnZU1lbnUiLCJwb3B1cEltYWdlIiwic3JjIiwiYWx0IiwicG9wdXBJbWFnZVRleHQiLCJ0ZXh0Q29udGVudCIsImNsb25lTm9kZSIsIl9hZGRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfdG9nZ2xlU3VibWl0QnRuIiwiZm9yRWFjaCIsImJ1dHRvbkVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2lucHV0TGlzdCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2V0RWxlbWVudEJ5SWQiLCJhdmF0YXJJbWFnZXJTcmMiLCJsb2dvU3JjIiwicHJvZmlsZVBvcHVwIiwicHJvZmlsZU1lbnVFZGl0Rm9ybSIsInByb2ZpbGVDbG9zZUJ1dHRvbiIsIm1lbnVJbnB1dE5hbWUiLCJtZW51SW5wdXRUaXRsZSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVRpdGxlRGVzY3JpcHRpb24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInBvcHVwQWRkQ2FyZCIsInBvcHVwQWRkQ2FyZENsb3NlQnV0dG9uIiwicG9wdXBBZGRDYXJkVGl0bGVJbnB1dCIsInBvcHVwQWRkQ2FyZFVybElucHV0IiwiYWRkQ2FyZEJ1dHRvbiIsImNhcmRzTGlzdCIsInBvcHVwSW1hZ2VDbG9zZUJ0biIsImNyZWF0ZUNhcmQiLCJjYXJkIiwicHJlcGVuZCIsInJlbmRlciIsInZhbHVlIiwiaW5pdGlhbENhcmRzIiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9